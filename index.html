<html>

<head>
  <title>TidesX</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="data/sources.js"></script>
  <script src="script.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<link rel="icon" href="images/icon.png">
  <link rel="apple-touch-icon" href="images/ios-icon.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="application-name" content="TidesX">
	<meta name="apple-mobile-web-app-title" content="TidesX">
	<meta name="msapplication-starturl" content="/">
	<script>(function(a,b,c){if(c in b&&b[c]){var d,e=a.location,f=/^(a|html)$/i;a.addEventListener("click",function(a){d=a.target;while(!f.test(d.nodeName))d=d.parentNode;"href"in d&&(d.href.indexOf("http")||~d.href.indexOf(e.host))&&(a.preventDefault(),e.href=d.href)},!1)}})(document,window.navigator,"standalone")</script>
</head>

<body onload="showFavouriteLocations();setup();">
  <div class="topBar">
    <div class="tabButtons">
      <i class="fa fa-search" id="searchTabButton" onclick="changeTab('search');"></i>
      <img src="images/icon_white.png" class="selectedTab" id="homeTabButton" onclick="changeTab('home');">
      <i class="fa fa-cog" id="settingsTabButton" onclick="changeTab('settings');"></i>
    </div>
    <div id="titleBar">TidesX</div>
  </div>

  <div id="main">
    <div class="tab" id="searchTab">
      <input id="searchInput" oninput="updateSearch();" placeholder="Location Name" autocomplete="off" onfocus="keyboardResize(true);" onblur="keyboardResize(false);">
      <div id="searchResults">Type a few characters to search coastal locations.</div>
    </div>

    <div class="tab tabActive" id="homeTab">
      Your favourite locations will appear here once you've chosen some.
    </div>

    <div class="tab" id="settingsTab">
      <table>
        <tr>
          <td>Sort favourites</td>
          <td>
            <label class="switch">
              <input type="checkbox" id="sortSetting" onchange="changeSetting('sort');">
              <span class="slider round"></span>
            </label>
          </td>
        </tr>
        <tr>
          <td>Cache favourites data</td>
          <td>
            <label class="switch">
              <input type="checkbox" id="cacheSetting" onchange="changeSetting('cache');">
              <span class="slider round"></span>
            </label>
          </td>
        </tr>
      </table>
      <button onclick="window.localStorage.setItem('tidesXFavourites','[]');alert('Favourites cleared.');showFavouriteLocations();">Clear favourites</button><br>
      <button onclick="window.localStorage.removeItem('tidesXFavourites');window.localStorage.removeItem('tidesXSettings');alert('All user data removed.');window.location.reload();">Clear all user data<br>(including settings)</button><br>
      <button onclick="window.location.reload(true);">Force restart app</button>

      <div class="linksAndThanks">
        Thank you for using TidesX!<br>
        &copy; William Henderson 2020.<br>
        Visit the <a href="https://github.com/w-henderson/TidesX">GitHub</a>.
      </div>
    </div>

    <div class="tab" id="locationTab">
      <span>Today (currently <span id="currentHeight"><img src="images/loading.gif"></span>)</span>
      <div id="todayTides" class="detailedTides">
        <img src="images/loading.gif">
      </div>
      <span>Tomorrow</span>
      <div id="tomorrowTides" class="detailedTides">
        <img src="images/loading.gif">
      </div>

      <button style="float:left;" id="favouritesButton" onclick="updateFavourites();">Add to favourites</button>
      <button style="float:right;" onclick="alert('This feature is in development.');">More dates</button>
    </div>
  </div>
</body>

</html>
